## 从输入URL到页面加载的全过程

### 大致流程

1、URL解析

2、DNS解析

3、TCP连接

4、处理请求

5、响应请求

6、页面渲染

### URL解析

首先判断输入的地址是否是合法的URL，然后浏览器还会做相关的安全检查，访问限制，检查缓存。

浏览器缓存可以查看：[浏览器缓存](../Basic/cache.md)

### DNS解析

浏览器向DNS服务器发起请求，解析该URL中的域名对应的IP地址。

基本流程：浏览器缓存--系统缓存--路由器缓存--ISP DNS缓存--根域名服务器

### TCP连接

从前面的步骤，我们已经获取到IP地址，根据IP地址和默认的80端口，可以和服务器建立TCP连接。

过程：

1、应用层：发起HTTP请求

2、传输层：TCP传输报文(数据分割，标记标号，TCP三次握手)

3、网络层：IP协议查询Mac地址

4、链路层：以太网协议

### 处理请求

服务器对浏览器请求做出响应，并把对应的html文件发送给浏览器

最常见的就是接收TCP报文后，对HTTP进行解析，重定向，URL重写等操作。

### 接收响应

浏览器接收到服务器的响应资源后，会对资源进行分析。

常见的操作有：查看响应头，压缩，缓存，解析

### 渲染页面

客户端（浏览器）解析HTML内容并渲染出来，浏览器接收到数据包后的解析。解析流程如下：

构建DOM树：词法分析然后解析成DOM树（dom tree），是由dom元素及属性节点组成，树的根是document对象

构建CSS规则树：生成CSS规则树（CSS Rule Tree）

构建render树：Web浏览器将DOM和CSSOM结合，并构建出渲染树（render tree）

布局（Layout）：计算出每个节点在屏幕中的位置

绘制（Painting）：即遍历render树，并使用UI后端层绘制每个节点。

文章阅读：

[网红面试题：从输入 url 到看到页面发生了什么](https://juejin.cn/post/7091224941789446175)
