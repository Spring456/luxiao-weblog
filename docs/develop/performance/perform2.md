## 图片优化

### 图片格式

 Web 图片格式有 JPEG/JPG、PNG、WebP、Base64、SVG 等

 二进制位数与色彩的关系

 在计算机中，像素用二进制数来表示。不同的图片格式中像素与二进制位数之间的对应关系是不同的。一个像素对应的二进制位数越多，它可以表示的颜色种类就越多，成像效果也就越细腻，文件体积相应也会越大。

一个二进制位表示两种颜色（0|1 对应黑|白），如果一种图片格式对应的二进制位数有 n 个，那么它就可以呈现 2^n 种颜色。

### JPEG和JPG

特点：有损压缩、体积小、加载快、不支持透明

2、使用场景

JPG 图片经常作为大的背景图、轮播图或 Banner 图出现

使用 JPG 呈现大图，既可以保住图片的质量，又不会带来令人头疼的图片体积，是当下比较推崇的一种方案。

3、缺陷

它处理矢量图形和 Logo 等线条感较强、颜色对比强烈的图像时，人为压缩导致的图片模糊会相当明显；不支持透明度处理

### PNG-8 与 PNG-24

特点：无损压缩、质量高、体积大、支持透明

1、优点

PNG 图片具有比 JPG 更强的色彩表现力，对线条的处理更加细腻，对透明度有良好的支持

2、PNG-8 与 PNG-24 如何选择

当你追求最佳的显示效果、并且不在意文件体积大小时，是推荐使用 PNG-24 的。

为了规避体积的问题，我们一般不用PNG去处理较复杂的图像。当我们遇到适合 PNG 的场景时，也会优先选择更为小巧的 PNG-8。

3、使用场景

主要用它来呈现小的 Logo、颜色简单且对比强烈的图片或背景等。

### SVG

特点：文件体积更小，可压缩性更强

1、优点

图片可无限放大而不失真

SVG 是文本文件，具有较强的灵活性

2、缺点

一方面是它的渲染成本比较高，这点对性能来说是很不利的。另一方面，SVG 存在着其它图片格式所没有的学习成本

3、使用场景

SVG 是文本文件，我们既可以像写代码一样定义 SVG，把它写在 HTML 里、成为 DOM 的一部分，也可以把对图形的描述写入以 .svg 为后缀的独立文件


### Base64

特点：文本文件、依赖编码、小图标解决方案

Base64 并非一种图片格式，而是一种编码方式，是作为小图标解决方案而存在的

Base64 图片的出现，也是为了减少加载网页图片时对服务器的请求次数，从而提升网页性能。Base64 是作为雪碧图的补充而存在的

Base64 是一种用于传输 8Bit 字节码的编码方式，通过对图片进行 Base64 编码，我们可以直接将编码结果写入 HTML 或者写入 CSS，从而减少 HTTP 请求的次数。自动就解析base64字符串码，解码为一个图片，而不需再去发送 HTTP 请求。

1、使用场景

Base64对应的图片往往是非常小的 Logo。

何不把大图也换成 Base64 呢？

Base64 编码后，图片大小会膨胀为原文件的 4/3（这是由 Base64 的编码原理决定的）。如果我们把大图也编码到 HTML 或 CSS 文件中，后者的体积会明显增加，即便我们减少了 HTTP 请求，也无法弥补这庞大的体积带来的性能开销，得不偿失。

在传输非常小的图片的时候，Base64 带来的文件体积膨胀、以及浏览器解析 Base64 的时间开销，与它节省掉的 HTTP 请求开销相比，可以忽略不计，这时候才能真正体现出它在性能方面的优势。

### WebP

1、特点：WebP 像 JPEG 一样对细节丰富的图片信手拈来，像 PNG 一样支持透明，像 GIF 一样可以显示动态图片——它集多种图片文件格式的优点于一身。

无损 WebP 支持透明度（也称为 alpha 通道），仅需 22％ 的额外字节。对于有损 RGB 压缩可接受的情况，有损 WebP 也支持透明度，与 PNG 相比，通常提供 3 倍的文件大小。

2、缺点：

兼容性差。

第一种解决方案根据浏览器不同，对图片后缀进行处理，展现不同的后缀。

第二种是服务器根据http请求头部的Accept字段来决定返回什么格式的图片。当 Accept 字段包含 image/webp 时，就返回 WebP 格式的图片，否则返回原图  

3、使用场景

几乎所有场景都可以使用。但兼容性是个问题



