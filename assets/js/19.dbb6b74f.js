(window.webpackJsonp=window.webpackJsonp||[]).push([[19],{504:function(t,s,a){t.exports=a.p+"assets/img/liulanqi.4afa02bd.png"},505:function(t,s,a){t.exports=a.p+"assets/img/huiliu.26973a43.png"},506:function(t,s,a){t.exports=a.p+"assets/img/xuanran.e860d462.png"},694:function(t,s,a){"use strict";a.r(s);var r=a(2),e=Object(r.a)({},(function(){var t=this,s=t._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h2",{attrs:{id:"浏览器相关-浏览器页面渲染机制"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#浏览器相关-浏览器页面渲染机制"}},[t._v("#")]),t._v(" 浏览器相关——浏览器页面渲染机制")]),t._v(" "),s("h3",{attrs:{id:"页面加载过程"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#页面加载过程"}},[t._v("#")]),t._v(" 页面加载过程")]),t._v(" "),s("p",[s("img",{attrs:{src:a(504),alt:"页面加载过程"}})]),t._v(" "),s("h3",{attrs:{id:"浏览器的组成"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#浏览器的组成"}},[t._v("#")]),t._v(" 浏览器的组成")]),t._v(" "),s("p",[t._v("浏览器的核心是两个部分："),s("code",[t._v("渲染引擎")]),t._v("和"),s("code",[t._v("JavaScript引擎")]),t._v(",也是两个线程，分别是GUI渲染线程与JS引擎线程。为了防止不可预期的结果，这两个线程是互斥的。")]),t._v(" "),s("p",[t._v("GUI渲染线程负责DOM的解析和CSSOM的解析，这两种解析是并行发生，不会相互阻塞。")]),t._v(" "),s("p",[t._v("渲染引擎就是将文档渲染出来，不同的浏览器有不同的渲染引擎，渲染文档时，主要有4个步骤：")]),t._v(" "),s("p",[s("img",{attrs:{src:a(505),alt:"渲染引擎"}})]),t._v(" "),s("p",[t._v("JS引擎就是加载处理JS脚本的。它的加载、解析与执行会阻塞DOM的构建。影响页面在解析文档上的顺序和构建渲染树时的操作。")]),t._v(" "),s("h3",{attrs:{id:"浏览器渲染过程"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#浏览器渲染过程"}},[t._v("#")]),t._v(" 浏览器渲染过程")]),t._v(" "),s("h4",{attrs:{id:"_1、解析html-css-js"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1、解析html-css-js"}},[t._v("#")]),t._v(" 1、解析HTML,CSS,JS")]),t._v(" "),s("ul",[s("li",[s("p",[t._v("一是HTML/SVG/XHTML，HTML字符串描述了一个页面的结构，浏览器会把HTML结构字符串解析转换DOM树形结构。")]),t._v(" "),s("ul",[s("li",[t._v("浏览器将HTLM文件构建为DOM树，可以分为这几个步骤：")])]),t._v(" "),s("p",[t._v("字节数据——字符串——Token(标记)——Node(节点)——DOM树")]),t._v(" "),s("p",[t._v("字节数据：浏览器根据文件指定编码(UTF-8)将传输过来的二进制字节数据转换为字符串。")]),t._v(" "),s("p",[t._v("token(标记处理):将输入解析成符号，HTML符号包括开始标签，结束标签，属性值，属性名等")]),t._v(" "),s("p",[t._v("构建DOM树：解析器获取这些标记之后，用合适的方法创建DOM对象并把这些符号插入到DOM对象中。")])]),t._v(" "),s("li",[s("p",[t._v("二是CSS，解析CSS会产生CSS规则树")]),t._v(" "),s("ul",[s("li",[t._v("解析CSS为CSSOM可以分为这几个步骤")])]),t._v(" "),s("p",[t._v("字节数据——字符串——Token(标记)——Node(节点)——CSSOM")]),t._v(" "),s("p",[t._v("浏览器css解析器根据语法规范解析所有的css文件，然后得到一个解析表。")])]),t._v(" "),s("li",[s("p",[t._v("三是Javascript脚本，等到Javascript 脚本文件加载后， 通过 DOM API 和 CSSOM API 来操作 DOM Tree 和 CSS Rule Tree。")])])]),t._v(" "),s("h4",{attrs:{id:"_2、构建渲染树-rending-tree"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2、构建渲染树-rending-tree"}},[t._v("#")]),t._v(" 2、构建渲染树(rending tree)")]),t._v(" "),s("p",[t._v("渲染树不等于DOM树，渲染树只会包括需要显示的节点和这些节点的样式信息。会忽略那些不需要渲染的节点(比如使用了display:none隐藏的节点)")]),t._v(" "),s("p",[t._v("CSS 的 Rule Tree主要是为了完成匹配并把CSS Rule附加上Rendering Tree上的每个Element（也就是每个Frame）")]),t._v(" "),s("p",[t._v("构建DOM树的过程，要经历计算尺寸、计算样式权重、解析js文件。")]),t._v(" "),s("h4",{attrs:{id:"_3、渲染布局"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3、渲染布局"}},[t._v("#")]),t._v(" 3、渲染布局")]),t._v(" "),s("p",[t._v("确定渲染树中每个节点的几何属性，比如位置，大小等等。遍历渲染树，调用渲染器的 paint() 方法在屏幕上显示其内容。又叫布局(layout)和回流重绘的过程。")]),t._v(" "),s("h4",{attrs:{id:"绘制"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#绘制"}},[t._v("#")]),t._v(" 绘制")]),t._v(" "),s("p",[t._v("调用操作系统Native GUI的API绘制。")]),t._v(" "),s("p",[t._v("整个过程如下：")]),t._v(" "),s("p",[s("img",{attrs:{src:a(506),alt:"浏览器渲染机制"}})]),t._v(" "),s("h3",{attrs:{id:"javascript引擎"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#javascript引擎"}},[t._v("#")]),t._v(" JavaScript引擎")]),t._v(" "),s("p",[t._v("如果在解析HTML过程中遇到了"),s("code",[t._v("<script>")]),t._v("，就暂停解析，GUI线程就会挂起，进入JS引擎，这样dom解析就被阻塞了。")]),t._v(" "),s("p",[t._v("JS引擎执行完毕，再将控制权交给渲染引擎，往下渲染HTML文档。如果脚本加载时间较长，那么浏览器就会一直等待脚本下载完成再执行后面的html文档。这样页面就会卡住")]),t._v(" "),s("p",[t._v("JS文件不只是可以更改DOM，还可以更改CSS样式，更改CSSOM。所以JS想修改CSSOM，那必须要先拿到CSSOM，所以在这种情况下，浏览器会下载和构建CSSOM，然后执行JS，最后构建DOM")]),t._v(" "),s("h3",{attrs:{id:"在-script-里执行js代码"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#在-script-里执行js代码"}},[t._v("#")]),t._v(" 在"),s("code",[t._v("<script>")]),t._v("里执行JS代码")]),t._v(" "),s("p",[s("strong",[t._v("1、直接在"),s("code",[t._v("<script>")]),t._v("里写js代码")])]),t._v(" "),s("p",[t._v("脚本文件放在页面顶部，这个时候DOM节点还没有生成完成，如果在这里就调用DOM节点，会报错。")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("script type"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"text/javascript"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n  console"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("document"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getElementById")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'p'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//null")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("script"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("body"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("p id"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'p'")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("123")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("p"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("body"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n")])])]),s("p",[t._v("如上，在"),s("code",[t._v("<script>")]),t._v("获取页面元素，会显示为null，因为此时DOM节点还没有渲染完成。")]),t._v(" "),s("p",[t._v("两种解决办法：")]),t._v(" "),s("p",[t._v("(1)、使用"),s("code",[t._v("window.onload")])]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("script type"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"text/javascript"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n\t\twindow"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("onload")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t\tconsole"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("document"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getElementById")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'p'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\t\t"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("script"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("body"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n\t\t"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("p id"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'p'")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("123")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("p"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("body"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n")])])]),s("p",[t._v("(2)、将"),s("code",[t._v("<script>")]),t._v("标签放到页面底部")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("body"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("p id"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'p'")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("123")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("p"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("body"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("script type"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"text/javascript"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n  console"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("document"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getElementById")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'p'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("script"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n")])])]),s("p",[t._v("(3)、设定DOMContentLoaded事件的回调函数")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("script type"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"text/javascript"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n  document"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("addEventListener")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'DOMContentLoaded'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("event")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n          console"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("document"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getElementById")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'p'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("script"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("body"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("p id"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'p'")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("123")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("p"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("body"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n")])])]),s("h3",{attrs:{id:"引入外部js文件时-async和defer"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#引入外部js文件时-async和defer"}},[t._v("#")]),t._v(" 引入外部JS文件时，async和defer")]),t._v(" "),s("p",[t._v("由于"),s("code",[t._v("<script>")]),t._v("标签使用js可以直接在里面写入，也可以引入外部js文件，因此就带来以下几种情况")]),t._v(" "),s("p",[t._v("1、引入外部JS文件"),s("code",[t._v('<script src="vue.js"><\/script>')])]),t._v(" "),s("p",[t._v("这种情况下，浏览器会立即加载并执行脚本。会阻塞后面文档的加载")]),t._v(" "),s("p",[t._v("2、使用async异步加载"),s("code",[t._v('<script src="vue.js" async><\/script>')])]),t._v(" "),s("p",[t._v("async 属性表示异步执行引入的JS文件。使用另一个进程下载脚本，下载时不会阻塞浏览器渲染。这种情况下，浏览器渲染流程如下:")]),t._v(" "),s("p",[t._v("a、浏览器解析HTML网页")]),t._v(" "),s("p",[t._v("b、当解析到"),s("code",[t._v("<script>")]),t._v("标签里面有async属性时，就开启另一个进程")]),t._v(" "),s("p",[t._v("c、浏览器一边下载渲染HTML，一边并行下载"),s("code",[t._v("<script>")]),t._v("标签中的外部脚本")]),t._v(" "),s("p",[t._v("d、当脚本下载完成后，就暂停HTML解析，开始执行脚本")]),t._v(" "),s("p",[t._v("e、脚本执行完成，再解析渲染HTML网页")]),t._v(" "),s("p",[t._v("async的弊端就是无法保证脚本的执行顺序，哪个脚本先执行完成就执行哪个脚本。如果脚本之间有依赖关系，最好不使用这个属性。")]),t._v(" "),s("p",[t._v("3、defer属性延迟加载，"),s("code",[t._v('<script src="vue.js" defer><\/script>')])]),t._v(" "),s("p",[t._v("defer属性表示延迟加载，是等待DOM加载完成之后才执行脚本，加载脚本是并行的。这种情况下，浏览器渲染流程如下:")]),t._v(" "),s("p",[t._v("a、浏览器解析HTML网页")]),t._v(" "),s("p",[t._v("b、当解析到"),s("code",[t._v("<script>")]),t._v("标签里面有defer属性时，就开启另一个进程")]),t._v(" "),s("p",[t._v("c、浏览器一边下载渲染HTML，一边并行下载"),s("code",[t._v("<script>")]),t._v("标签中的外部脚本")]),t._v(" "),s("p",[t._v("d、当浏览器完成解析HTML后，再来执行已经下载完成的脚本")]),t._v(" "),s("p",[t._v("e、脚本执行完成，再解析渲染HTML网页")]),t._v(" "),s("p",[t._v("defer属性，浏览器下载脚本文件的时候，不会阻塞页面渲染。下载的脚本文件在DOMContentLoaded事件触发前执行（即刚刚读取完"),t._v("标签），而且可以保证执行顺序就是它们在页面上出现的顺序。")]),t._v(" "),s("p",[t._v("对于内置而不是加载外部脚本的script标签，以及动态生成的script标签，defer属性不起作用")]),t._v(" "),s("h3",{attrs:{id:"影响渲染效率的因素-回流重绘"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#影响渲染效率的因素-回流重绘"}},[t._v("#")]),t._v(" 影响渲染效率的因素--回流重绘")]),t._v(" "),s("p",[t._v("通过上面渲染引擎的四个阶段,在解析阶段，JS文本的内容或属性会影响到页面渲染；当页面解析完成之后就要构建渲染树，生成DOM树后要布局到页面上，这个时候JS又会动态修改DOM属性或CSS属性又会导致重新布局，这个时候就会发生回流重绘。")]),t._v(" "),s("p",[t._v("回流重绘参考："),s("a",{attrs:{href:"https://spring456.github.io/web_docs.github.io/#/FrontEnd/Basic/reflow",target:"_blank",rel:"noopener noreferrer"}},[t._v("回流重绘"),s("OutboundLink")],1)]),t._v(" "),s("p",[t._v("页面在渲染过程中，开销比较大的就是这一环节。所以性能优化中有一条就是减少对DOM的操作是有道理的。")]),t._v(" "),s("h3",{attrs:{id:"前端渲染和ssr渲染"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#前端渲染和ssr渲染"}},[t._v("#")]),t._v(" 前端渲染和ssr渲染")]),t._v(" "),s("p",[t._v("前端渲染是服务端将静态文件发送给客户端，客户端获取到文件之后，在浏览器运行JS，根据运行结果生成相应的DOM")]),t._v(" "),s("p",[t._v("ssr渲染：服务端渲染下，用户第一次请求页面时，服务器将需要的页面以HTML字符串的形式返回给客户端，客户端直接渲染成HTML结构内容。不需要再去运行JS生成DOM了。这样速度更快。")]),t._v(" "),s("h3",{attrs:{id:"总结"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#总结"}},[t._v("#")]),t._v(" 总结")]),t._v(" "),s("p",[t._v("1、浏览器有两大核心：渲染引擎和JS引擎。渲染引擎负责渲染HTML和CSS，两者是并行进行。JS引擎负责渲染JS文件")]),t._v(" "),s("p",[t._v("2、浏览器工作流程可以分为：解析HTML，CSS，JS——构建渲染树——渲染布局——绘制")]),t._v(" "),s("p",[t._v("3、解析DOM时，碰到"),s("code",[t._v("<script>")]),t._v("标签时，GUI线程挂起阻塞DOM解析，进入JS引擎渲染JS。")]),t._v(" "),s("p",[t._v("4、如果"),s("code",[t._v("<script>")]),t._v("标签没有async或defer属性，则解析JS文件和css，等待CSSOM构建完成后，再执行JS，执行完毕再解析HTML，重新构建")]),t._v(" "),s("p",[t._v("5、如果有async或defer，则按照规则延迟或者解析但不执行js文件。此时HTML解析照常进行。如果是async属性，js加载完成后就立即执行阻塞HTML解析；如果是defer，则等HTML解析完成后再执行js文件")])])}),[],!1,null,null,null);s.default=e.exports}}]);