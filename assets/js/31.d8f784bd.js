(window.webpackJsonp=window.webpackJsonp||[]).push([[31],{542:function(t,s,a){t.exports=a.p+"assets/img/AMD.42e1ab12.png"},543:function(t,s,a){t.exports=a.p+"assets/img/ES6-module.8359802c.png"},743:function(t,s,a){"use strict";a.r(s);var n=a(2),e=Object(n.a)({},(function(){var t=this,s=t._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h2",{attrs:{id:"前端模块化开发"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#前端模块化开发"}},[t._v("#")]),t._v(" 前端模块化开发")]),t._v(" "),s("h3",{attrs:{id:"产生原因"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#产生原因"}},[t._v("#")]),t._v(" 产生原因")]),t._v(" "),s("p",[t._v("1、项目复杂后，各个插件可能会使用同一个名称，导致的命名空间混乱")]),t._v(" "),s("p",[t._v("2、无法合理地管理项目的依赖和版本")]),t._v(" "),s("p",[t._v("3、无法方便的控制依赖的加载顺序")]),t._v(" "),s("h3",{attrs:{id:"commonjs"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#commonjs"}},[t._v("#")]),t._v(" CommonJS")]),t._v(" "),s("p",[t._v("CommonJS是一种广泛应用的JS模块化规范。")]),t._v(" "),s("p",[t._v("核心思想就是通过require方法来同步加载依赖的其他模块，通过module.exports导出需要暴露的接口。")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 导入")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" module1 "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'./module'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 导出")]),t._v("\nmodule"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("exports "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" module1"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("fn\n")])])]),s("p",[t._v("CommonJS特点：")]),t._v(" "),s("p",[t._v("1、在Node.js环境下运行")]),t._v(" "),s("p",[t._v("2、是一种同步任务")]),t._v(" "),s("p",[t._v("3、很多npm包都采用CommonJS规范")]),t._v(" "),s("p",[t._v("4、代码无法直接在浏览器上使用，需要转成ES5使用")]),t._v(" "),s("h3",{attrs:{id:"amd"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#amd"}},[t._v("#")]),t._v(" AMD")]),t._v(" "),s("p",[t._v("AMD也是一种JS模块化规范。最具代表性的实现是requirejs")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 定义一个模块")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("define")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'module'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'dep'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("dep")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  retrun exports\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 导入使用")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'module'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("module")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),s("p",[t._v("AMD使用起来比CommonJS要复杂一些。与CommonJS相比，它的特点：")]),t._v(" "),s("p",[t._v("1、可以直接在浏览器中运行")]),t._v(" "),s("p",[t._v("2、异步加载")]),t._v(" "),s("p",[t._v("3、同时加载多个模块")]),t._v(" "),s("p",[t._v("4、可以再浏览器和Node.js环境下运行。")]),t._v(" "),s("p",[t._v("5、JS运行环境没有原生支持AMD，需要导入实现了AMD的库才行")]),t._v(" "),s("p",[s("img",{attrs:{src:a(542),alt:"AMD"}})]),t._v(" "),s("h3",{attrs:{id:"cmd"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#cmd"}},[t._v("#")]),t._v(" CMD")]),t._v(" "),s("p",[t._v("CMD规范是国内发展出来的，有个浏览器的实现SeaJS，SeaJS要解决的问题和requireJS一样，只不过在模块定义方式和模块加载（可以说运行、解析）时机上有所不同.")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 基本语法")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("define")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("id"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" dependencies"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" factory"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),s("p",[t._v("factory 为对象、字符串时，表示模块的接口就是该对象、字符串。")]),t._v(" "),s("p",[t._v("factory 为函数时，表示是模块的构造方法。执行该构造方法，可以得到模块向外提供的接口。")]),t._v(" "),s("p",[t._v("factory 方法在执行时，默认会传入三个参数：require、exports 和 module：")]),t._v(" "),s("p",[t._v("使用：")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 定义有依赖的模块  module.js")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("define")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("require"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" exports"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" module")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 引入依赖模块，同步")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" $ "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'jquery.min.js'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("$")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'div'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("addClass")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'active'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//引入依赖模块(异步)")]),t._v("\n    require"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("async")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'./module1'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("m")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//暴露模块")]),t._v("\n  exports"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("xxx "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" value\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n \n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 加载模块")]),t._v("\nseajs"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("use")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'module.js'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("m")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n \n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("p",[t._v("Sea.js特点：")]),t._v(" "),s("p",[t._v("1、 推崇一个模块一个文件，遵循统一的写法")]),t._v(" "),s("p",[t._v("2、一个文件一个模块，所以经常就用文件名作为模块id")]),t._v(" "),s("p",[t._v("3、CMD推崇依赖就近，所以一般不在define的参数中写依赖，在factory中写")]),t._v(" "),s("p",[t._v("4、模块的加载是异步的，模块使用时才会加载执行")]),t._v(" "),s("p",[s("code",[t._v("AMD和CMD的区别：")])]),t._v(" "),s("p",[t._v("1、AMD推崇依赖前置，在定义模块的时候就要声明其依赖的模块")]),t._v(" "),s("p",[t._v("2、CMD推崇就近依赖，只有在用到某个模块的时候再去require")]),t._v(" "),s("h3",{attrs:{id:"es6模块化开发"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#es6模块化开发"}},[t._v("#")]),t._v(" ES6模块化开发")]),t._v(" "),s("p",[s("img",{attrs:{src:a(543),alt:"ES6模块化"}})]),t._v(" "),s("h3",{attrs:{id:"es6模块加载"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#es6模块加载"}},[t._v("#")]),t._v(" ES6模块加载")]),t._v(" "),s("p",[t._v("1、浏览器加载")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("script type"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"module"')]),t._v(" src"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"./foo.js"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("script"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n")])])]),s("p",[s("code",[t._v("type='module'")]),t._v("表示引入了ES6模块，有以下特点：")]),t._v(" "),s("p",[t._v("a、异步加载，不会堵塞浏览器。即等到整个页面渲染完成，再执行js文件。相当于给"),s("code",[t._v("<script>")]),t._v("设置defer属性。")]),t._v(" "),s("p",[t._v("b、如果网页有多个"),s("code",[t._v('<script type="module">')]),t._v("，它们会按照在页面出现的顺序依次执行")]),t._v(" "),s("p",[t._v("c、使用了async属性，"),s("code",[t._v('<script type="module">')]),t._v("就不会按照在页面出现的顺序执行，而是只要该模块加载完成，就执行该模块")]),t._v(" "),s("h3",{attrs:{id:"es6模块和commonjs模块的差异"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#es6模块和commonjs模块的差异"}},[t._v("#")]),t._v(" ES6模块和CommonJS模块的差异")]),t._v(" "),s("p",[t._v("CommonJS 模块是 Node.js 专用的，与 ES6 模块不兼容。语法上面，两者最明显的差异是，CommonJS 模块使用require()和module.exports，ES6 模块使用import和export。")]),t._v(" "),s("p",[s("code",[t._v("1、CommonJS 模块输出的是一个值的拷贝，ES6 模块输出的是值的引用。")])]),t._v(" "),s("p",[t._v("CommonJS 模块输出的是值的拷贝，也就是说，一旦输出一个值，模块内部的变化就影响不到这个值")]),t._v(" "),s("p",[t._v("ES6 模块不会缓存运行结果，而是动态地去被加载的模块取值，并且变量总是绑定其所在的模块。由于 ES6 输入的模块变量，只是一个“符号连接”，所以这个变量是只读的，对它进行重新赋值会报错")]),t._v(" "),s("p",[s("code",[t._v("2、CommonJS 模块是运行时加载，ES6 模块是编译时输出接口。")])]),t._v(" "),s("p",[t._v("CommonJS 加载的是一个对象（即module.exports属性），该对象只有在脚本运行完才会生成。而 ES6 模块不是对象，它的对外接口只是一种静态定义，在代码静态解析阶段就会生成")]),t._v(" "),s("p",[s("code",[t._v("3、CommonJS 模块的require()是同步加载模块，ES6 模块的import命令是异步加载，有一个独立的模块依赖的解析阶段")])]),t._v(" "),s("p",[t._v("4、Node.js里对ES6模块和CommonJS模块的分类")]),t._v(" "),s("p",[t._v("Node.js要求"),s("code",[t._v(".mjs文件")]),t._v("总是以 ES6 模块加载，"),s("code",[t._v(".cjs文件")]),t._v("总是以 CommonJS 模块加载，"),s("code",[t._v(".js文件")]),t._v("的加载取决于package.json里面type字段的设置。如果设置"),s("code",[t._v("type='module'")]),t._v(",设置这个属性，该项目的js文件就会被解释为ES6模块。")]),t._v(" "),s("p",[t._v("参考文章："),s("a",{attrs:{href:"https://es6.ruanyifeng.com/#docs/module",target:"_blank",rel:"noopener noreferrer"}},[t._v("阮一峰--es6"),s("OutboundLink")],1)])])}),[],!1,null,null,null);s.default=e.exports}}]);